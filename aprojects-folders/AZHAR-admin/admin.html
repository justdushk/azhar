<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMS –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –ü–æ–ª–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div class="login-screen" id="loginScreen">
        <div class="login-box">
            <div class="login-header">
                <div class="login-icon">üîê</div>
                <h1 class="login-title">CMS –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                <p class="login-subtitle">–í–æ–π–¥–∏—Ç–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —Å–∞–π—Ç–∞</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label">–õ–æ–≥–∏–Ω</label>
                    <input type="text" class="form-input" id="username" placeholder="admin" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" class="form-input" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                <button type="submit" class="btn btn-primary">–í–æ–π—Ç–∏</button>
                <p class="demo-info">–î–µ–º–æ: admin / admin123</p>
            </form>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
    <div class="admin-panel" id="adminPanel">
        <div class="notification" id="notification"></div>

        <!-- Top Bar -->
        <div class="top-bar">
            <div class="top-bar-left">
                <div class="logo-admin">üìã</div>
                <div class="top-bar-title">
                    <h1>CMS –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                    <div class="top-bar-subtitle">–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</div>
                </div>
            </div>
            <div class="top-bar-right">
                <button class="btn-sm btn-save" id="publishBtn" style="display:none;">üì¢ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                <button class="btn-sm btn-secondary" id="previewBtn">üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</button>
                <button class="btn-sm btn-secondary" id="syncBtn">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</button>
                <button class="btn-icon" id="logoutBtn">üö™</button>
            </div>
        </div>

        <div class="main-container">
            <!-- Sidebar -->
            <aside class="sidebar">
                <nav class="sidebar-menu">
                    <button class="menu-item active" data-view="dashboard">üè† Dashboard</button>
                    <button class="menu-item" data-view="navigation">üß≠ –ù–∞–≤–∏–≥–∞—Ü–∏—è</button>
                    <button class="menu-item" data-view="pages">üìÑ –°—Ç—Ä–∞–Ω–∏—Ü—ã</button>
                    <button class="menu-item" data-view="sections">üß© –†–µ–¥–∞–∫—Ç–æ—Ä —Å–µ–∫—Ü–∏–π</button>
                    <button class="menu-item" data-view="settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </nav>
            </aside>

            <!-- Main Content -->
            <main class="content" id="mainContent"></main>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="navModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="navModalTitle">–ü—É–Ω–∫—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏</h3>
                <button class="modal-close" onclick="closeNavModal()">‚úï</button>
            </div>
            <div class="form-group">
                <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                <input type="text" id="navName" class="form-input" placeholder="–û —Ü–µ–Ω—Ç—Ä–µ" required>
            </div>
            <div class="form-group">
                <label class="form-label">URL *</label>
                <input type="text" id="navUrl" class="form-input" placeholder="#about –∏–ª–∏ /page">
            </div>
            <div class="form-group">
                <label class="form-label">–ü–æ–∑–∏—Ü–∏—è</label>
                <input type="number" id="navPosition" class="form-input" value="0" min="0">
            </div>
            <button onclick="saveNavItem()" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>

    <div class="modal" id="pageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</h3>
                <button class="modal-close" onclick="closePageModal()">‚úï</button>
            </div>
            <div class="form-group">
                <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã *</label>
                <input type="text" id="pageName" class="form-input" placeholder="–û –Ω–∞—Å" required>
            </div>
            <div class="form-group">
                <label class="form-label">URL (slug) *</label>
                <input type="text" id="pageSlug" class="form-input" placeholder="/about">
            </div>
            <div class="form-group">
                <label class="form-label">SEO Title</label>
                <input type="text" id="pageTitle" class="form-input" placeholder="–û –Ω–∞—Å - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∞–π—Ç–∞">
            </div>
            <div class="form-group">
                <label class="form-label">SEO Description</label>
                <textarea id="pageDesc" class="form-textarea" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º"></textarea>
            </div>
            <button onclick="savePage()" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
        </div>
    </div>

    <div class="modal" id="sectionModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 class="modal-title" id="sectionModalTitle">–°–æ–∑–¥–∞—Ç—å —Å–µ–∫—Ü–∏—é</h3>
                <button class="modal-close" onclick="closeSectionModal()">‚úï</button>
            </div>
            
            <div class="form-group">
                <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —à–∞–±–ª–æ–Ω</label>
                <div class="template-grid" id="templateGrid">
                    <div class="template-card" data-template="text">
                        <div class="template-icon">üìù</div>
                        <div class="template-name">–¢–µ–∫—Å—Ç</div>
                    </div>
                    <div class="template-card" data-template="image">
                        <div class="template-icon">üñºÔ∏è</div>
                        <div class="template-name">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
                    </div>
                    <div class="template-card" data-template="text-image">
                        <div class="template-icon">üìùüñºÔ∏è</div>
                        <div class="template-name">–¢–µ–∫—Å—Ç + –ö–∞—Ä—Ç–∏–Ω–∫–∞</div>
                    </div>
                    <div class="template-card" data-template="image-text">
                        <div class="template-icon">üñºÔ∏èüìù</div>
                        <div class="template-name">–ö–∞—Ä—Ç–∏–Ω–∫–∞ + –¢–µ–∫—Å—Ç</div>
                    </div>
                    <div class="template-card" data-template="two-columns">
                        <div class="template-icon">üìä</div>
                        <div class="template-name">–î–≤–µ –∫–æ–ª–æ–Ω–∫–∏</div>
                    </div>
                    <div class="template-card" data-template="hero">
                        <div class="template-icon">üéØ</div>
                        <div class="template-name">Hero —Å–µ–∫—Ü–∏—è</div>
                    </div>
                </div>
            </div>

            <div id="sectionEditor" style="display:none;">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">–®–∏—Ä–∏–Ω–∞ —Å–µ–∫—Ü–∏–∏</label>
                        <select id="sectionWidth" class="form-select">
                            <option value="100%">100% (–ø–æ–ª–Ω–∞—è —à–∏—Ä–∏–Ω–∞)</option>
                            <option value="1200px" selected>1200px (—Å—Ç–∞–Ω–¥–∞—Ä—Ç)</option>
                            <option value="800px">800px (—É–∑–∫–∞—è)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–í—ã—Å–æ—Ç–∞ (auto –∏–ª–∏ px)</label>
                        <input type="text" id="sectionHeight" class="form-input" value="auto">
                    </div>
                </div>

                <div id="textBlock" class="editor-block">
                    <div class="form-group">
                        <label class="form-label">–¢–µ–∫—Å—Ç</label>
                        <textarea id="textContent" class="form-textarea" rows="5" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞</label>
                            <input type="number" id="fontSize" class="form-input" value="16" min="10" max="72">
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ñ–∏—Ä–Ω–æ—Å—Ç—å</label>
                            <select id="fontWeight" class="form-select">
                                <option value="400">–û–±—ã—á–Ω—ã–π</option>
                                <option value="600">–ü–æ–ª—É–∂–∏—Ä–Ω—ã–π</option>
                                <option value="700">–ñ–∏—Ä–Ω—ã–π</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
                            <input type="color" id="textColor" class="form-input" value="#333333">
                        </div>
                    </div>
                </div>

                <div id="imageBlock" class="editor-block" style="display:none;">
                    <div class="form-group">
                        <label class="form-label">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                        <input type="text" id="imageUrl" class="form-input" placeholder="https://...">
                        <small>–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª:</small>
                        <input type="file" id="imageFile" accept="image/*" class="form-input">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">–®–∏—Ä–∏–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                            <input type="text" id="imageWidth" class="form-input" value="100%">
                        </div>
                        <div class="form-group">
                            <label class="form-label">–í—ã—Å–æ—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                            <input type="text" id="imageHeight" class="form-input" value="auto">
                        </div>
                    </div>
                </div>

                <div id="linkBlock" class="editor-block" style="display:none;">
                    <div class="form-group">
                        <label class="form-label">–¢–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏</label>
                        <input type="text" id="linkText" class="form-input" placeholder="–ù–∞–∂–º–∏—Ç–µ –∑–¥–µ—Å—å">
                    </div>
                    <div class="form-group">
                        <label class="form-label">URL —Å—Å—ã–ª–∫–∏</label>
                        <input type="text" id="linkUrl" class="form-input" placeholder="https://...">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">–ü–æ–∑–∏—Ü–∏—è —Å–µ–∫—Ü–∏–∏</label>
                    <input type="number" id="sectionPosition" class="form-input" value="0" min="0">
                </div>

                <button onclick="saveSection()" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ü–∏—é</button>
            </div>
        </div>
    </div>

    <div class="modal" id="previewModal">
        <div class="modal-content modal-fullscreen">
            <div class="modal-header">
                <h3 class="modal-title">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>
                <button class="modal-close" onclick="closePreviewModal()">‚úï</button>
            </div>
            <iframe id="previewFrame" style="width:100%;height:calc(100vh - 120px);border:1px solid #e5e7eb;border-radius:8px;"></iframe>
        </div>
    </div>

    <script src="admin-script.js"></script>
</body>
</html>
